// tag::noimage[]
// tag::bare-minimum[]
Если к новой версии модуля прилагается отдельная инструкция по обновлению, следуйте ей.

.Чтобы установить новую версию модуля:
// end::bare-minimum[]
. Создайте резервную копию БД.
// . Остановите сервис `dvappserver` все сервисы {dv}. Также остановите экземпляры Службы {ws} и все сервисы в кластере {dv} или СУБП, если таковые используются.
// tag::bare-minimum[]
. Устанавливать обновление рекомендуется на отдельную машину во избежание случаев, когда остаются старые файлы и папки системы.
. Обновите серверные компоненты на сервере Linux командой:
+
[source,subs=attributes]
----
sudo apt-get update
sudo apt-get install --only-upgrade docsvision-{update}
----
+
// tag::config[]
ifdef::is-service[]
. На сервере Linux при обновлении сервиса будет предложено перезаписать текущий конфигурационный файл `appsettings.json`. Доступные варианты:
+
* Перезаписать текущий конфигурационный файл `appsettings.json`.
** Текущий файл будет перезаписан стандартным, все выполненные настройки будут сохранены в файле `appsettings.json.dpkg-old`. Существующие настройки, включая псевдонимы и строки подключения к БД, потребуется перенести в новый файл `appsettings.json`.
* Сохранить текущий `appsettings.json`.
** Все выполненные настройки останутся без изменений, стандартный файл конфигурации будет сохранён как `appsettings.json.dpkg-dist`.
* Показать различия между версиями.
** В окне командной строки будут отображены отличия между старой и новой версией. Знаком `+` обозначаются добавленные строки, знаком `-` обозначаются удалённые строки.
* Запустить оболочку командной строки для проверки ситуации.
** Возвращает в окно командной строки, дальнейшие действия зависят от администратора.
// end::config[]
endif::[]
// end::bare-minimum[]
+
ifndef::mancons[]
. Затем установите серверные компоненты на машину с Windows, запустив инсталлятор `.msi` серверной части модуля.
endif::[]
+
. Перезапустите *{sss-new}* и все сервисы {dv} на Linux.
+
. Запустите программу _{cns}_ и перейдите в раздел _Базы данных_.
+
****
Пользователь, от имени которого запускается _{cns}_:

* Должен являться администратором {dv} -- быть добавленным в группу *{dv-admins-serv}* в конфигурационном файле модуля _{pl}_, см. раздел "xref:dev@platform:admin:config-platform.adoc[]".
* Входить в группы {dv} в Справочнике сотрудников:
+
- _{dv-dm-admins-dir}_.
- _{dv-ad-admins-dir}_.
- _{dv-sys-wf-dir}_.
- __Системные группы_.
****
+
. Обновите существующую БД по инструкции, приведённой в документации модуля _{pl}_, раздел "xref:dev@platform:console:db-update.adoc[]".
+
NOTE: Установка флагов в диалогах выбора обновляемых библиотек карточек и настроек модулей может оказаться недоступной, если изменений в библиотеке карточек между обновлениями не было.
ifndef::nolibs[]
. Дойдите до выбора обновляемых библиотек карточек. Выберите библиотеки и нажмите *Далее*.
+
.Обновление библиотек карточек
image::dev@platform:admin:db-update-libs.png[Обновление библиотек карточек]
+
. Перезапустите *{sss-new}* и все сервисы {dv} на Linux ещё раз.
. Выберите модули {dv}, настройки которых должны быть загружены в БД и нажмите *Завершить*.
endif::nolibs[]
+
// end::noimage[]
.Шаг загрузки настроек модулей
image::dev@platform:admin:db-create-modules.png[Шаг загрузки настроек модулей]
