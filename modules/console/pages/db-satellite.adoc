= Подключить сателлитные базы данных

// WARNING: Рассмотренная далее функция доступна, только если БД {dv} размещается в СУБД {mssql}. При использовании {pgsql} функциональность сателлитных БД не поддерживается, переход на {pg} будет невозможен.

Архивные карточки, системные данные и журналы работы {dv} могут храниться в основной базе данных {dv}, или быть вынесены в отдельные (сателлитные) базы данных. Использование сателлитных баз данных позволяет облегчить обслуживание основной базы {dv}, сократить время на создание её резервных копий и т.п.

Место хранения архивных карточек, системных данных и журналов работы {dv} определяется администратором при xref:db-create.adoc[создании новой] базы данных {dv} и при xref:db-connect.adoc[подключении БД], для которой не принималось решение о способе хранения указанных данных.

По умолчанию данные будут храниться в основной БД {dv} -- сателлитные БД не подключаются.

.Перед подключением сателлитных БД обратите внимание:
[WARNING]
====
* Сателлитные БД могут быть подключены только при создании новой БД и при подключении существующей БД. В процессе работы с {dv} переключиться на использование сателлитных БД или отключить сателлитные БД нельзя. Исключение приведено в пункте xref:db-log-satellite.adoc[Изменение места хранения журналов с основной БД на сателлитную].
* При подключении существующей БД {dv} будет применена существующая в данной БД конфигурация сателлитов.
+
include::admin:partial$excerpts.adoc[tags=satellite]
====

Настройте способ хранения архивных карточек, системных данных и журналов работы. Для этого нажмите на кнопку *Настройки* в xref:db-master.adoc[Мастере БД {dv}] при xref:db-create.adoc[создании БД] или xref:db-connect.adoc[подключении БД].

.Кнопка для открытия панели настроек создания и подключения БД
image::admin:db-advanced-settings.png[Кнопка для открытия панели настроек создания и подключения БД]

Будет открыто окно *Настройки генерации скрипта*.

.Настройки генерации скрипта
image::admin:db-create-script-other.png[Настройки генерации скрипта]

.Настройка размещения таблиц осуществляется с помощью трёх параметров:
* *UseOuterArchive* -- определяет, должна ли для хранения архивных карточек использоваться сателлитная БД.
+
При включённой настройке (значение *_True_*) для хранения архивных карточек будет создана отдельная БД с названием *Название-БД-Docsvision_Archive*.
+
При выключенной настройке (значение *_False_*) архивные карточки будут храниться в основной БД {dv}. Дополнительная информация приведена в пункте xref:archive-data.adoc[Особенности хранения архивных данных в {dv}].
+
[WARNING]
====
Если ваша лицензия {dv} не содержит опцию _{dv} Архивная база данных_, параметр `UseOuterArchive` должен быть в значении *_False_*, иначе работа с архивными карточками завершится ошибкой.
====
+
* *UseOuterLog* -- определяет, должна ли для хранения журналов использоваться сателлитная БД.
+
При включённой настройке (значение *_True_*) для хранения журналов будет создана отдельная БД с названием `Название-БД-Docsvision_Log`.
+
При выключенной настройке (значение *_False_*) журналы будут храниться в основной БД {dv}.
+
* *UseOuterMetadata* -- определяет, должна ли для хранения системных таблиц использоваться сателлитная БД.
+
При включённой настройке (значение *_True_*) для хранения системных таблиц будет создана отдельная БД с названием `Название-БД-Docsvision_Metadata`.
+
При выключенной настройке (значение *_False_*) системные таблицы будут храниться в основной БД {dv}.
+
БД `Название-БД-Docsvision_Metadata` будет создана независимо от значения настройки *UseOuterMetadata*, если для xref:db-service-tables.adoc[служебных таблиц] выбран способ размещения *UseOuterDatabase*.

WARNING: При повторном подключении БД после её создания изменять значения настроек *UseOuterArchive*, *UseOuterLog*, *UseOuterMetadata* запрещено.

// tag::copy[]
[WARNING]
====
* При резервном копировании БД {dv} также следует создавать резервные копии сателлитных баз данных (если используются): *_Archive* (обязательно), *_Metadata* (рекомендуется) и *_Log* (необязательно).
* При переносе резервной копии БД на другой сервер обязательно потребуются также копии всех сателлитных БД.
* При восстановлении копии БД на том же сервере SQL с переименованием также необходимо восстановить копии сателлитных БД с таким же переименованием.
====
// end::copy[]

[WARNING]
====
После создания БД изменять конфигурацию сателлитных БД не рекомендуется. Это может привести к потере данных.

Использование одного сателлита несколькими базами недопустимо. В таком случае корректность работы системы не гарантируется.
====
